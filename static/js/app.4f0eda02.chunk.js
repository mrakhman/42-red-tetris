(this.webpackJsonp=this.webpackJsonp||[]).push([[0],{223:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return c}));var r=n(224),a=n(0),o=n.n(a),i=n(392),l=n(282),s=n(275);n.n(s)()(""+(e&&Object({NODE_ENV:"production",PUBLIC_URL:"",APP_MANIFEST:{name:"red-tetris",slug:"red-tetris",version:"1.0.0",orientation:"portrait",icon:"./assets/icon.png",splash:{image:"./assets/splash.png",resizeMode:"contain",backgroundColor:"#ffffff"},updates:{fallbackToCacheTimeout:0},assetBundlePatterns:["**/*"],web:{},sdkVersion:"38.0.0",platforms:["ios","android","web"]}})&&Object({NODE_ENV:"production",PUBLIC_URL:"",APP_MANIFEST:{name:"red-tetris",slug:"red-tetris",version:"1.0.0",orientation:"portrait",icon:"./assets/icon.png",splash:{image:"./assets/splash.png",resizeMode:"contain",backgroundColor:"#ffffff"},updates:{fallbackToCacheTimeout:0},assetBundlePatterns:["**/*"],web:{},sdkVersion:"38.0.0",platforms:["ios","android","web"]}}).EXPO_SOCKET_URL||"http://localhost:3001"));function c(){return o.a.createElement(i.b,null,o.a.createElement(l.a,null),o.a.createElement(r.StatusBar,null))}}).call(this,n(14))},282:function(e,t,n){"use strict";n.d(t,"a",(function(){return $}));var r=n(221),a=n(204),o=n(70),i=n(396),l=n(0),s=n(4),c=n(26),u=n(52),m=n(2);function f(e){var t=e.navigation;return l.createElement(m.a,{style:d.container},l.createElement(c.a,{style:d.title},"This screen doesn't exist."),l.createElement(u.a,{onPress:function(){return t.replace("Root")},style:d.link},l.createElement(c.a,{style:d.linkText},"Go to home screen!")))}var d=s.a.create({container:{flex:1,backgroundColor:"#fff",alignItems:"center",justifyContent:"center",padding:20},title:{fontSize:20,fontWeight:"bold"},link:{marginTop:15,paddingVertical:15},linkText:{fontSize:14,color:"#2e78b7"}}),p=n(7),h=n.n(p),g=n(43),y=n(21),E=37,b=38,v=39,w=40,k=function(e){var t=e.size,n=e.color,r=e.label,a=e.style,o=e.onPress;return l.createElement(m.a,{style:[{alignItems:"center",margin:10},a]},l.createElement(u.a,{onPress:o,style:{backgroundColor:n,borderRadius:t/2,height:t,width:t,shadowColor:"rgba(0,0,0, .4)",shadowOffset:{height:1,width:1},shadowOpacity:20,shadowRadius:5}}),l.createElement(c.a,{style:{marginTop:10}},r))},S=function(){return l.createElement(m.a,null,l.createElement(m.a,{style:{flexDirection:"row"}},l.createElement(m.a,{style:{flex:1}},l.createElement(m.a,{style:{flexDirection:"row",marginTop:20}},l.createElement(k,{color:"#2dc421",size:50,label:"Pause(P)"}),l.createElement(k,{color:"#2dc421",size:50,label:"Sound(S)"}),l.createElement(k,{color:"#efcc19",size:50,label:"Reset(R)"})),l.createElement(m.a,{style:{alignItems:"center"}},l.createElement(k,{color:"#5a65f1",size:160,label:"Drop(Space)",style:{marginTop:20}}))),l.createElement(m.a,{style:{alignItems:"center",flex:1,justifyContent:"center"}},l.createElement(k,{color:"#5a65f1",size:70,style:{margin:0},onPress:function(){return document.dispatchEvent(new KeyboardEvent("keydown",{keyCode:b}))}}),l.createElement(m.a,{style:{flexDirection:"row"}},l.createElement(k,{color:"#5a65f1",size:70,style:{margin:0,marginRight:60},onPress:function(){return document.dispatchEvent(new KeyboardEvent("keydown",{keyCode:E}))}}),l.createElement(k,{color:"#5a65f1",size:70,style:{margin:0},onPress:function(){return document.dispatchEvent(new KeyboardEvent("keydown",{keyCode:v}))}})),l.createElement(k,{color:"#5a65f1",size:70,style:{margin:0},onPress:function(){return document.dispatchEvent(new KeyboardEvent("keydown",{keyCode:w}))}}))))},C=n(27),x=function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"window",t=l.useState((function(){return C.a.get(e)})),n=h()(t,2),r=n[0],a=n[1];return l.useEffect((function(){var t=!0,n=function(n){t&&a(n[e])};return C.a.addEventListener("change",n),function(){t=!1,C.a.removeEventListener("change",n)}}),[e,a]),r}("window")};function T(e){var t,n=e.children,r=x(),a=r.width,o=r.height;return t=o/a<1.5?o/960:a/560,l.createElement(m.a,{style:z.container},l.createElement(m.a,{style:[z.gameboy,{transform:[{scale:t}]}]},l.createElement(c.a,{style:z.title},"R E D \u25a0 T E T R I S"),l.createElement(m.a,{style:z.display},n),l.createElement(S,null)))}var z=s.a.create({container:{flex:1,backgroundColor:"#009688",alignItems:"center",justifyContent:"center",padding:20,height:"100%"},display:{alignItems:"center",backgroundColor:"#9ead86",borderBottomColor:"#fa6b6b",borderLeftColor:"#980f0f",borderRightColor:"#fa6b6b",borderTopColor:"#980f0f",borderWidth:5,height:470,justifyContent:"center",padding:10,width:400},gameboy:{justifyContent:"center",alignItems:"center",backgroundColor:"#af0000",borderRadius:20,paddingBottom:50,paddingHorizontal:50},title:{fontSize:30,marginVertical:20,textAlign:"center"}});function P(){var e=Object(y.useNavigation)(),t=l.useState(),n=h()(t,2),r=n[0],a=n[1],o=l.useState(),i=h()(o,2),s=i[0],f=i[1];return l.createElement(T,null,l.createElement(m.a,{style:{alignItems:"center"}},l.createElement(c.a,{style:R.title},"Username"),l.createElement(g.a,{value:null!=r?r:"",onChangeText:a,style:{borderWidth:1,marginBottom:20,height:30}}),l.createElement(c.a,{style:R.title},"Room"),l.createElement(g.a,{value:null!=s?s:"",onChangeText:f,style:{borderWidth:1,marginBottom:20,height:30}}),l.createElement(u.a,{style:{marginBottom:20},onPress:function(){return r&&s&&e.push("Playground",{username:r,room:s})}},l.createElement(c.a,{style:R.linkText},"Join Room")),l.createElement(u.a,{onPress:function(){return e.push("Playground",{})}},l.createElement(c.a,{style:R.linkText},"Solo mode"))))}var R=s.a.create({title:{marginBottom:10,alignSelf:"flex-start"},linkText:{fontSize:14,color:"#004580"}}),O=n(28),I=n.n(O),j=(n(328),n(257)),L=n(258),B=n(259),D=n.n(B),N={I:[[0,0,0,0],[1,1,1,1],[0,0,0,0],[0,0,0,0]],L:[[0,0,1],[1,1,1],[0,0,0]],J:[[1,0,0],[1,1,1],[0,0,0]],Z:[[1,1,0],[0,1,1],[0,0,0]],S:[[0,1,1],[1,1,0],[0,0,0]],O:[[1,1],[1,1]],T:[[0,1,0],[1,1,1],[0,0,0]]},W={I:[0,3],L:[-1,4],J:[-1,4],Z:[-1,4],S:[-1,4],O:[-1,4],T:[-1,4]},A=["I","L","J","Z","S","O","T"],V=n(12),_=n.n(V),U=n(15),F=n.n(U),J=function(){function e(t){_()(this,e),this.type=t.type,t.timeStamp?this.timeStamp=t.timeStamp:this.timeStamp=Date.now(),t.shape?this.shape=t.shape:this.shape=N[this.type],t.pos?this.pos=t.pos:this.pos=W[this.type]}return F()(e,[{key:"rotate",value:function(){var t=this.shape;return new e({shape:t[0].map((function(e,n){return t.map((function(e){return e[n]})).reverse()})),type:this.type,pos:this.pos,timeStamp:this.timeStamp})}},{key:"fall",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return new e({shape:this.shape,type:this.type,pos:[this.pos[0]+t,this.pos[1]],timeStamp:Date.now()})}},{key:"right",value:function(){return new e({shape:this.shape,type:this.type,pos:[this.pos[0],this.pos[1]+1],timeStamp:this.timeStamp})}},{key:"left",value:function(){return new e({shape:this.shape,type:this.type,pos:[this.pos[0],this.pos[1]-1],timeStamp:this.timeStamp})}}]),e}(),M=s.a.create({container:{marginRight:2,marginBottom:2},outer:{alignItems:"center",borderColor:"#879372",borderWidth:1,height:20,justifyContent:"center",width:20},inner:{height:12,width:12,backgroundColor:"#879372"}}),K=function(e){var t=e.value;return l.createElement(m.a,{style:[M.outer,t?{borderColor:"black"}:void 0]},l.createElement(m.a,{style:[M.inner,t?{backgroundColor:"black"}:void 0]}))},Z=function(e){var t=e.matrix,n=e.style;return l.createElement(m.a,{style:[H.container,{height:22*I.a.size(t)},n]},I.a.map(t,(function(e,t){return l.createElement(m.a,{key:t,style:{flexDirection:"row",width:22*I.a.size(e),justifyContent:"space-between"}},I.a.map(e,(function(e,t){return l.createElement(K,{key:t,value:e})})))})))},H=s.a.create({container:{padding:2,justifyContent:"space-between",borderColor:"black",borderWidth:1,backgroundColor:"#9ead86"}}),G=n(397),X=n(262);function q(e){var t=e.style,r=G.a.fromModule(n(340)).uri;return l.createElement(m.a,{style:[{flexDirection:"row"},t]},I.a.map(Array(6),(function(e,t){return l.createElement(X.a,{key:t,source:{uri:r},style:{width:14,height:24,overflow:"hidden"},imageStyle:{height:186,left:-215,resizeMode:"cover",top:-25,width:400}})})))}function Q(){var e,t=Object(y.useRoute)().params,n=t.room,r=t.username,a=l.useState(new J({type:null!=(e=I.a.sample(A))?e:"T"})),o=h()(a,2),i=o[0],s=o[1],u=A[(I.a.indexOf(A,i.type)+1)%I.a.size(A)];Object(L.a)((function(){s((function(e){return e.pos[0]+e.shape.length<20?e.fall():new J({type:u})}))}),500),D()((function(e){e===b&&s((function(e){return e.rotate()})),e===E&&s((function(e){return e.left()})),e===v&&s((function(e){return e.right()})),e===w&&s((function(e){return e.fall()}))}));var f=function(e,t){var n=t.shape,r=t.pos;return n.forEach((function(t,a){return t.forEach((function(t,o){r[0]+a>=0&&r[0]+a<20&&r[1]+o<10&&(e[r[0]+a][r[1]+o]=n[a][o])}))})),e}(I.a.map(Array(20),(function(){return I.a.map(Array(10),0)})),i);return l.createElement(l.Fragment,null,l.createElement(T,null,l.createElement(m.a,{style:{flexDirection:"row",alignSelf:"flex-start",width:"100%"}},l.createElement(Z,{matrix:f}),l.createElement(m.a,{style:{marginLeft:20,flex:1}},l.createElement(c.a,{style:{fontSize:20}},"Score"),l.createElement(q,{style:{marginVertical:10,alignSelf:"flex-end"}}),l.createElement(c.a,{style:{fontSize:20}},"Start Line"),l.createElement(q,{style:{marginVertical:10,alignSelf:"flex-end"}}),l.createElement(c.a,{style:{fontSize:20}},"Level"),l.createElement(q,{style:{marginVertical:10,alignSelf:"flex-end"}}),l.createElement(c.a,{style:{fontSize:20}},"Next"),l.createElement(Z,{matrix:I.a.take(I.a.merge(I.a.map(Array(2),(function(){return I.a.map(Array(4),0)})),new J({type:u}).shape),2),style:{borderWidth:0,marginVertical:10,alignSelf:"flex-end"}})))),n&&r&&l.createElement(j.Widget,{title:"RedTetris",subtitle:"Hi "+r+"! Welcome to "+n}))}var Y={prefixes:[n(264).makeUrl("/")],config:{screens:{Root:"/",Playground:"/play",NotFound:"*"}}};function $(e){var t=e.colorScheme;return l.createElement(r.a,{linking:Y,theme:"dark"===t?a.a:o.a},l.createElement(te,null))}var ee=Object(i.a)();function te(){return l.createElement(ee.Navigator,{screenOptions:{headerShown:!1}},l.createElement(ee.Screen,{name:"Root",component:P}),l.createElement(ee.Screen,{name:"Playground",component:Q}),l.createElement(ee.Screen,{name:"NotFound",component:f,options:{title:"Oops!"}}))}},296:function(e,t,n){n(297),e.exports=n(390)},297:function(e,t){"serviceWorker"in navigator&&window.addEventListener("load",(function(){navigator.serviceWorker.register("/expo-service-worker.js",{scope:"/"}).then((function(e){})).catch((function(e){console.info("Failed to register service-worker",e)}))}))},340:function(e,t,n){e.exports=n.p+"static/media/sprite.81de6409.png"},382:function(e,t){}},[[296,1,2]]]);
//# sourceMappingURL=app.4f0eda02.chunk.js.map