(this.webpackJsonp=this.webpackJsonp||[]).push([[0],{146:function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var r=n(4),a=n(26),o=n(2),i=n(0),s=n(54),l=n(38),c=function(e){var t=e.size,n=e.color,r=e.label,l=e.style,c=e.onPress;return i.createElement(o.a,{style:[{alignItems:"center",margin:10},l]},i.createElement(s.a,{onPress:c,style:{backgroundColor:n,borderRadius:t/2,height:t,width:t,shadowColor:"rgba(0,0,0, .4)",shadowOffset:{height:1,width:1},shadowOpacity:20,shadowRadius:5}}),i.createElement(a.a,{style:{marginTop:10}},r))},u=function(){return i.createElement(o.a,null,i.createElement(o.a,{style:{flexDirection:"row"}},i.createElement(o.a,{style:{flex:1}},i.createElement(o.a,{style:{flexDirection:"row",marginTop:20}},i.createElement(c,{color:"#2dc421",size:50,label:"Pause(P)"}),i.createElement(c,{color:"#2dc421",size:50,label:"Sound(S)"}),i.createElement(c,{color:"#efcc19",size:50,label:"Reset(R)"})),i.createElement(o.a,{style:{alignItems:"center"}},i.createElement(c,{color:"#5a65f1",size:160,label:"Drop(Space)",style:{marginTop:20}}))),i.createElement(o.a,{style:{alignItems:"center",flex:1,justifyContent:"center"}},i.createElement(c,{color:"#5a65f1",size:70,style:{margin:0},onPress:function(){return document.dispatchEvent(new KeyboardEvent("keydown",{keyCode:l.a.rotate,which:l.a.rotate}))}}),i.createElement(o.a,{style:{flexDirection:"row"}},i.createElement(c,{color:"#5a65f1",size:70,style:{margin:0,marginRight:60},onPress:function(){return document.dispatchEvent(new KeyboardEvent("keydown",{keyCode:l.a.left,which:l.a.left}))}}),i.createElement(c,{color:"#5a65f1",size:70,style:{margin:0},onPress:function(){return document.dispatchEvent(new KeyboardEvent("keydown",{keyCode:l.a.right,which:l.a.right}))}})),i.createElement(c,{color:"#5a65f1",size:70,style:{margin:0},onPress:function(){return document.dispatchEvent(new KeyboardEvent("keydown",{keyCode:l.a.down,which:l.a.down}))}}))))},m=n(7),f=n.n(m),d=n(28),p=function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"window",t=i.useState((function(){return d.a.get(e)})),n=f()(t,2),r=n[0],a=n[1];return i.useEffect((function(){var t=!0,n=function(n){t&&a(n[e])};return d.a.addEventListener("change",n),function(){t=!1,d.a.removeEventListener("change",n)}}),[e,a]),r}("window")};function h(e){var t,n=e.children,r=p(),s=r.width,l=r.height;return t=l/s<1.5?l/960:s/560,i.createElement(o.a,{style:g.container},i.createElement(o.a,{style:[g.gameboy,{transform:[{scale:t}]}]},i.createElement(a.a,{style:g.title},"R E D \u25a0 T E T R I S"),i.createElement(o.a,{style:g.display},n),i.createElement(u,null)))}var g=r.a.create({container:{flex:1,backgroundColor:"#009688",alignItems:"center",justifyContent:"center",padding:20,height:"100%"},display:{alignItems:"center",backgroundColor:"#9ead86",borderBottomColor:"#fa6b6b",borderLeftColor:"#980f0f",borderRightColor:"#fa6b6b",borderTopColor:"#980f0f",borderWidth:5,height:470,justifyContent:"center",padding:10,width:400},gameboy:{justifyContent:"center",alignItems:"center",backgroundColor:"#af0000",borderRadius:20,paddingBottom:50,paddingHorizontal:50},title:{fontSize:30,marginVertical:20,textAlign:"center"}})},147:function(e,t,n){"use strict";var r=n(12),a=n.n(r),o=n(15),i=n.n(o),s=n(44),l=function(){function e(t){a()(this,e),this.type=t.type,t.timeStamp?this.timeStamp=t.timeStamp:this.timeStamp=Date.now(),t.shape?this.shape=t.shape:this.shape=s.c[this.type],t.pos?this.pos=t.pos:this.pos=s.e[this.type]}return i()(e,[{key:"rotate",value:function(){var t=this.shape;return new e({shape:t[0].map((function(e,n){return t.map((function(e){return e[n]})).reverse()})),type:this.type,pos:this.pos,timeStamp:this.timeStamp})}},{key:"fall",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return new e({shape:this.shape,type:this.type,pos:[this.pos[0]+t,this.pos[1]],timeStamp:Date.now()})}},{key:"right",value:function(){return new e({shape:this.shape,type:this.type,pos:[this.pos[0],this.pos[1]+1],timeStamp:this.timeStamp})}},{key:"left",value:function(){return new e({shape:this.shape,type:this.type,pos:[this.pos[0],this.pos[1]-1],timeStamp:this.timeStamp})}}]),e}();t.a=l},148:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(27),a=n.n(r),o=n(397),i=n(270),s=n(2),l=n(0);function c(e){var t=e.style,r=o.a.fromModule(n(374)).uri;return l.createElement(s.a,{style:[{flexDirection:"row"},t]},a.a.map(Array(6),(function(e,t){return l.createElement(i.a,{key:t,source:{uri:r},style:{width:14,height:24,overflow:"hidden"},imageStyle:{height:186,left:-215,resizeMode:"cover",top:-25,width:400}})})))}},179:function(e,t,n){"use strict";var r=n(27),a=n.n(r),o=n(2),i=n(4),s=n(0),l=i.a.create({container:{marginRight:2,marginBottom:2},outer:{alignItems:"center",borderColor:"#879372",borderWidth:1,height:20,justifyContent:"center",width:20},inner:{height:12,width:12,backgroundColor:"#879372"}}),c=function(e){var t=e.value;return s.createElement(o.a,{style:[l.outer,t?{borderColor:"black"}:void 0]},s.createElement(o.a,{style:[l.inner,t?{backgroundColor:"black"}:void 0]}))},u=(t.a=function(e){var t=e.block,n=e.matrix,r=e.style;return s.createElement(o.a,{style:[u.container,{height:22*a.a.size(n)},r]},a.a.map(n,(function(e,n){return s.createElement(o.a,{key:n,style:{flexDirection:"row",width:22*a.a.size(e),justifyContent:"space-between"}},a.a.map(e,(function(e,r){return t.pos[0]<=n&&t.pos[0]+a.a.size(t.shape)>n&&t.pos[1]<=r&&t.pos[1]+a.a.size(t.shape[0])>r?s.createElement(c,{key:r,value:t.shape[n-t.pos[0]][r-t.pos[1]]||e}):s.createElement(c,{key:r,value:e})})))})))},i.a.create({container:{padding:2,justifyContent:"space-between",borderColor:"black",borderWidth:1,backgroundColor:"#9ead86"}}))},264:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return T}));var r=n(7),a=n.n(r),o=n(0),i=n.n(o),s=n(27),l=n.n(s),c=(n(336),n(2)),u=n(26),m=n(169),f=n(265),d=n(266),p=n.n(d),h=n(21),g=n(267),y=n.n(g),E=n(44),b=n(38),v=n(147),w=n(148),k=n(272),S=n(146),C=n(179),x=y()(""+(e&&Object({NODE_ENV:"production",PUBLIC_URL:"",APP_MANIFEST:{name:"red-tetris",slug:"red-tetris",version:"1.0.0",orientation:"portrait",icon:"./assets/icon.png",splash:{image:"./assets/splash.png",resizeMode:"contain",backgroundColor:"#ffffff"},updates:{fallbackToCacheTimeout:0},assetBundlePatterns:["**/*"],web:{},sdkVersion:"38.0.0",platforms:["ios","android","web"]}})&&Object({NODE_ENV:"production",PUBLIC_URL:"",APP_MANIFEST:{name:"red-tetris",slug:"red-tetris",version:"1.0.0",orientation:"portrait",icon:"./assets/icon.png",splash:{image:"./assets/splash.png",resizeMode:"contain",backgroundColor:"#ffffff"},updates:{fallbackToCacheTimeout:0},assetBundlePatterns:["**/*"],web:{},sdkVersion:"38.0.0",platforms:["ios","android","web"]}}).EXPO_SOCKET_URL||"http://localhost:3001"));function T(){var e,t=Object(h.useRoute)().params,n=null!=t?t:{},r=n.room,s=n.username,d=Object(o.useState)([]),g=a()(d,2),y=g[0],T=g[1],z=Object(o.useState)(new v.a({type:null!=(e=l.a.sample(E.d))?e:"T"})),O=a()(z,2),j=O[0],P=O[1],R=Object(o.useState)(Object(E.a)()),I=a()(R,2),L=I[0],D=I[1];Object(o.useEffect)((function(){x.emit("joinRoom",{username:s,room:r}),x.on("message",(function(e){e.username!==s&&Object(m.addResponseMessage)(e.username+": "+e.text,e.username)})),x.on("update room users",(function(e){T(e.users.map((function(e){return e.username})))}))}),[]);var N=E.d[(l.a.indexOf(E.d,j.type)+1)%l.a.size(E.d)];return Object(f.a)((function(){P((function(e){return function(e,t){var n=t.shape,r=t.pos,a=!1;return n.forEach((function(t,o){return t.forEach((function(t,i){var s;n[o][i]&&(r[0]+o>18||(null==e||null==(s=e[r[0]+o+1])?void 0:s[r[1]+i]))&&(a=!0)}))})),a}(L,e)?(D(function(e,t){var n=t.shape,r=t.pos,a=l.a.cloneDeep(e);return n.forEach((function(e,t){return e.forEach((function(e,o){n[t][o]&&r[0]+t>=0&&r[0]+t<20&&r[1]+o<10&&(a[r[0]+t][r[1]+o]=n[t][o])}))})),a}(L,e)),new v.a({type:N})):e.fall()}))}),500),p()((function(e){e===b.a.rotate&&P((function(e){return e.rotate()})),e===b.a.left&&P((function(e){return e.left()})),e===b.a.right&&P((function(e){return e.right()})),e===b.a.down&&P((function(e){return e.fall()}))})),i.a.createElement(i.a.Fragment,null,i.a.createElement(S.a,null,i.a.createElement(c.a,{style:{flexDirection:"row",alignSelf:"flex-start",width:"100%"}},i.a.createElement(C.a,{matrix:L,block:j}),i.a.createElement(c.a,{style:{marginLeft:20,flex:1}},i.a.createElement(u.a,{style:{fontSize:20}},"Score"),i.a.createElement(w.a,{style:{marginVertical:10,alignSelf:"flex-end"}}),i.a.createElement(u.a,{style:{fontSize:20}},"Start Line"),i.a.createElement(w.a,{style:{marginVertical:10,alignSelf:"flex-end"}}),i.a.createElement(u.a,{style:{fontSize:20}},"Level"),i.a.createElement(w.a,{style:{marginVertical:10,alignSelf:"flex-end"}}),i.a.createElement(u.a,{style:{fontSize:20}},"Next"),i.a.createElement(C.a,{matrix:Object(E.b)(),block:new v.a({type:N,pos:[0,0]}),style:{borderWidth:0,marginVertical:10,alignSelf:"flex-end"}})))),r&&s&&i.a.createElement(m.Widget,{title:"RedTetris",subtitle:Object(k.a)(y),handleNewUserMessage:function(e){x.emit("chatMessage",e)}}))}}).call(this,n(14))},272:function(e,t,n){"use strict";t.a=function(e){return 0===e.length?"No players":"Players: "+e.join(", ")}},290:function(e,t,n){"use strict";n.d(t,"a",(function(){return j}));var r=n(231),a=n(0),o=n.n(a),i=n(402),s=n(229),l=n(225),c=n(72),u=n(401),m=n(4),f=n(26),d=n(54),p=n(2);function h(e){var t=e.navigation;return a.createElement(p.a,{style:g.container},a.createElement(f.a,{style:g.title},"This screen doesn't exist."),a.createElement(d.a,{onPress:function(){return t.replace("Root")},style:g.link},a.createElement(f.a,{style:g.linkText},"Go to home screen!")))}var g=m.a.create({container:{flex:1,backgroundColor:"#fff",alignItems:"center",justifyContent:"center",padding:20},title:{fontSize:20,fontWeight:"bold"},link:{marginTop:15,paddingVertical:15},linkText:{fontSize:14,color:"#2e78b7"}}),y=n(7),E=n.n(y),b=n(45),v=n(21),w=n(146);function k(){var e=Object(v.useNavigation)(),t=a.useState(),n=E()(t,2),r=n[0],o=n[1],i=a.useState(),s=E()(i,2),l=s[0],c=s[1];return a.createElement(w.a,null,a.createElement(p.a,{style:{alignItems:"center"}},a.createElement(f.a,{style:S.title},"Username"),a.createElement(b.a,{value:null!=r?r:"",onChangeText:o,style:{borderWidth:1,marginBottom:20,height:30}}),a.createElement(f.a,{style:S.title},"Room"),a.createElement(b.a,{value:null!=l?l:"",onChangeText:c,style:{borderWidth:1,marginBottom:20,height:30}}),a.createElement(d.a,{style:{marginBottom:20},onPress:function(){return r&&l&&e.push("Playground",{username:r,room:l})}},a.createElement(f.a,{style:S.linkText},"Join Room")),a.createElement(d.a,{onPress:function(){return e.push("Playground",{})}},a.createElement(f.a,{style:S.linkText},"Solo mode"))))}var S=m.a.create({title:{marginBottom:10,alignSelf:"flex-start"},linkText:{fontSize:14,color:"#004580"}}),C=n(264),x={prefixes:[n(273).makeUrl("/")],config:{screens:{Root:"/",Playground:"/play",NotFound:"*"}}};function T(e){var t=e.colorScheme;return a.createElement(s.a,{linking:x,theme:"dark"===t?l.a:c.a},a.createElement(O,null))}var z=Object(u.a)();function O(){return a.createElement(z.Navigator,{screenOptions:{headerShown:!1}},a.createElement(z.Screen,{name:"Root",component:k}),a.createElement(z.Screen,{name:"Playground",component:C.a}),a.createElement(z.Screen,{name:"NotFound",component:h,options:{title:"Oops!"}}))}function j(){return o.a.createElement(i.b,null,o.a.createElement(T,null),o.a.createElement(r.StatusBar,null))}},304:function(e,t,n){n(305),e.exports=n(395)},305:function(e,t){"serviceWorker"in navigator&&window.addEventListener("load",(function(){navigator.serviceWorker.register("/expo-service-worker.js",{scope:"/"}).then((function(e){})).catch((function(e){console.info("Failed to register service-worker",e)}))}))},364:function(e,t){},374:function(e,t,n){e.exports=n.p+"static/media/sprite.81de6409.png"},38:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r={left:37,rotate:38,right:39,down:40,space:32,sound:83,reset:82,pause:80}},44:function(e,t,n){"use strict";n.d(t,"c",(function(){return o})),n.d(t,"e",(function(){return i})),n.d(t,"d",(function(){return s})),n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return c}));var r=n(27),a=n.n(r),o={I:[[0,0,0,0],[1,1,1,1],[0,0,0,0],[0,0,0,0]],L:[[0,0,1],[1,1,1],[0,0,0]],J:[[1,0,0],[1,1,1],[0,0,0]],Z:[[1,1,0],[0,1,1],[0,0,0]],S:[[0,1,1],[1,1,0],[0,0,0]],O:[[1,1],[1,1]],T:[[0,1,0],[1,1,1],[0,0,0]]},i={I:[0,3],L:[-1,4],J:[-1,4],Z:[-1,4],S:[-1,4],O:[-1,4],T:[-1,4]},s=["I","L","J","Z","S","O","T"],l=function(){return a.a.map(Array(20),(function(){return a.a.map(Array(10),0)}))},c=function(){return a.a.map(Array(2),(function(){return a.a.map(Array(4),0)}))}}},[[304,1,2]]]);
//# sourceMappingURL=app.ec3181fa.chunk.js.map